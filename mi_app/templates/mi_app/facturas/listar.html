{% extends "mi_app/base.html" %}

{% block title %}Facturas{% endblock %}

{% block content %}
<h1>Facturas</h1>

<div class="tabla-facturas">
<table>
    <thead>
        <tr>
            <th>Número</th>
            <th>Cliente</th>
            <th>Estado</th>
            <th class="monto">Total</th>
            <th>Fecha</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for factura in facturas %}
        <tr>
            <td>{{ factura.numero }}</td>
            <td>{{ factura.cliente.nombre }}</td>
            <td>{{ factura.get_estado_display }}</td>
            <td class="monto">${{ factura.total }}</td>
            <td class="fecha">{{ factura.creada|date:"d/m/Y H:i" }}</td>
            <td>
                <a href="{% url 'detalle_factura' factura.id %}">Ver</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">No hay facturas</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>

<div class="facturas-cards">
    {% for factura in facturas %}
    <div class="factura-card">
        <div class="fila">
            <span class="label">Número</span>
            <span class="valor">{{ factura.numero }}</span>
        </div>

        <div class="fila">
            <span class="label">Cliente</span>
            <span class="valor">{{ factura.cliente.nombre }}</span>
        </div>

        <div class="fila">
            <span class="label">Estado</span>
            <span class="valor">{{ factura.get_estado_display }}</span>
        </div>

        <div class="fila">
            <span class="label">Total</span>
            <span class="valor monto">${{ factura.total }}</span>
        </div>

        <div class="fila">
            <span class="label">Fecha</span>
            <span class="valor">{{ factura.creada|date:"d/m/Y H:i" }}</span>
        </div>

        <a href="{% url 'detalle_factura' factura.id %}" class="ver">
            Ver factura
        </a>
    </div>
    {% empty %}
    <p>No hay facturas</p>
    {% endfor %}
</div>

<a href="{% url 'dashboard' %}" class="btn">Volver</a>

{% endblock %}